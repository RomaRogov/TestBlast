System.register("chunks:///_virtual/ActionType.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"84474fa3PtKCpASWFGsg4ur","ActionType",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/BoostersController.ts",["cc"],(function(o){var e;return{setters:[function(o){e=o.cclegacy}],execute:function(){e._RF.push({},"639b2p3Ya5HOKMsCBKz4lqf","BoostersController",void 0);var t=o("BoosterType",function(o){return o[o.Bomb=0]="Bomb",o[o.Teleport=1]="Teleport",o}({}));o("BoostersController",function(){function o(o,e,r){var n=this;this.onBoosterUsed=void 0,this.interactionLocked=!1,o.initialize((function(o){if(!n.interactionLocked){var s=0;switch(o){case t.Bomb:s=r.bombBoosterPrice;break;case t.Teleport:s=r.teleportBoosterPrice}e.score<s||n.onBoosterUsed&&n.onBoosterUsed(o)}}),r.bombBoosterPrice,r.teleportBoosterPrice)}return o.prototype.gameEnded=function(){this.interactionLocked=!0},o}());e._RF.pop()}}}));

System.register("chunks:///_virtual/BoostersView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoostersController.ts"],(function(e){var t,o,r,i,n,l,s,u,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,s=e.Label,u=e.Node,a=e.Component},function(e){c=e.BoosterType}],execute:function(){var p,b,B,f,y,g,m,h,w,L,v;n._RF.push({},"664c3B+gUpCFIB55jYR+hG1","BoostersView",void 0);var P=l.ccclass,z=l.property;e("BoostersView",(p=P("BoostersView"),b=z({type:s}),B=z({type:s}),f=z({type:u}),y=z({type:u}),p((h=t((m=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,r(t,"bombBoosterPriceLabel",h,i(t)),r(t,"teleportBoosterPriceLabel",w,i(t)),r(t,"bombBoosterButton",L,i(t)),r(t,"teleportBoosterButton",v,i(t)),t}return o(t,e),t.prototype.initialize=function(e,t,o){this.bombBoosterButton.on(u.EventType.TOUCH_END,(function(){e(c.Bomb)})),this.teleportBoosterButton.on(u.EventType.TOUCH_END,(function(){e(c.Teleport)})),this.bombBoosterPriceLabel.string=t.toString(),this.teleportBoosterPriceLabel.string=o.toString()},t}(a)).prototype,"bombBoosterPriceLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(m.prototype,"teleportBoosterPriceLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(m.prototype,"bombBoosterButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(m.prototype,"teleportBoosterButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/ControllersManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FieldView.ts","./GameScoringView.ts","./GameEndView.ts","./FieldController.ts","./TilesPoolController.ts","./GameScoringController.ts","./GameEndController.ts","./BoostersController.ts","./BoostersView.ts"],(function(e){var o,t,n,r,i,l,a,s,c,d,m,g,u,f,p,C,h,b,w;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,a=e.JsonAsset,s=e.Prefab,c=e.Component},function(e){d=e.FieldView},function(e){m=e.GameScoringView},function(e){g=e.GameEndView},function(e){u=e.FieldController},function(e){f=e.TilesPoolController},function(e){p=e.GameScoringController},function(e){C=e.GameEndController,h=e.GameEndReason},function(e){b=e.BoostersController},function(e){w=e.BoostersView}],execute:function(){var G,y,E,v,S,V,B,P,z,D,M,R,L,F,A,x,I,N;i._RF.push({},"98bc9PMZ4ZJdYRth9t/Cuz2","ControllersManager",void 0);var _=l.ccclass,H=l.property;e("ControllersManager",(G=_("ControllersManager"),y=H({type:a}),E=H({type:s}),v=H({type:d}),S=H({type:m}),V=H({type:g}),B=H({type:w}),P=H({type:s}),G(((N=function(e){function o(){for(var o,t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];return o=e.call.apply(e,[this].concat(i))||this,n(o,"gameBalanceDataAsset",M,r(o)),n(o,"tilePrefab",R,r(o)),n(o,"fieldView",L,r(o)),n(o,"gameScoringView",F,r(o)),n(o,"gameEndView",A,r(o)),n(o,"boostersView",x,r(o)),n(o,"tileExplosionPrefab",I,r(o)),o.gameBalanceData=void 0,o.fieldController=void 0,o.tilesPoolController=void 0,o.gameScoringController=void 0,o.gameEndController=void 0,o.boostersController=void 0,o}t(o,e),o.setOnCompleteHandler=function(e){o.onInitializationCompleted=e},o.onLoadingHidden=function(){o.startGame()};var i=o.prototype;return i.start=function(){var e=this;this.gameBalanceData=this.gameBalanceDataAsset.json,o.startGame=this.onGameStart.bind(this),this.tilesPoolController=new f(this.tilePrefab,this.tileExplosionPrefab,this.gameBalanceData),this.gameScoringController=new p(this.gameBalanceData,this.gameScoringView),this.fieldController=new u(this.fieldView,this.tilesPoolController,this.gameBalanceData),this.boostersController=new b(this.boostersView,this.gameScoringController,this.gameBalanceData),this.gameEndController=new C(this.gameEndView,(function(){e.fieldController.onGameEnd(),e.boostersController.gameEnded()})),this.fieldController.onGroupRemoved=this.gameScoringController.groupRemoved.bind(this.gameScoringController),this.fieldController.onNoShufflesLeft=function(){e.gameEndController.onGameEnd(h.NoGroupsLeft)},this.gameScoringController.onGoalReached=function(){e.gameEndController.onGameEnd(h.GoalReached)},this.gameScoringController.onNoMovesLeft=function(){e.gameEndController.onGameEnd(h.NoMovesLeft)},this.boostersController.onBoosterUsed=function(o){e.fieldController.setBoosterMode(o),e.gameScoringController.boosterUsed(o)},o.onInitializationCompleted()},i.onGameStart=function(){this.fieldController.onGameStart()},o}(c)).onInitializationCompleted=void 0,N.startGame=void 0,M=o((D=N).prototype,"gameBalanceDataAsset",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=o(D.prototype,"tilePrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=o(D.prototype,"fieldView",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=o(D.prototype,"gameScoringView",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=o(D.prototype,"gameEndView",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=o(D.prototype,"boostersView",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=o(D.prototype,"tileExplosionPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=D))||z));i._RF.pop()}}}));

System.register("chunks:///_virtual/FieldController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileController.ts","./BoostersController.ts"],(function(i){var t,e,l,o,s,r;return{setters:[function(i){t=i.createForOfIteratorHelperLoose,e=i.createClass},function(i){l=i.cclegacy,o=i.Vec2},function(i){s=i.TileController},function(i){r=i.BoosterType}],execute:function(){l._RF.push({},"1c1025NDplEQLMYl8+aARSW","FieldController",void 0);i("FieldController",function(){function i(i,t,e){this.onNoShufflesLeft=void 0,this.onGroupRemoved=void 0,this.neighbours=[new o(1,0),new o(-1,0),new o(0,1),new o(0,-1)],this.fieldView=void 0,this.tilesPool=void 0,this.tileControllers=[],this.fieldSize=void 0,this.minimalGroupSize=void 0,this.fallingTileCount=0,this.shuffleAttempts=0,this.shuffleMaxAttempts=0,this.inputLocked=!1,this.currentBooster=null,this.bombRadius=1,this.tileToTeleport=null,this.requireRebuild=!1,this.fieldSize=e.field.size,this.minimalGroupSize=e.minimalGroupSize,this.shuffleMaxAttempts=e.mixTries,this.bombRadius=e.bombBoosterRadius,this.fieldView=i,this.tilesPool=t,i.setSize(this.fieldSize.x,this.fieldSize.y)}var l=i.prototype;return l.onGameStart=function(){for(var i=0;i<this.fieldSize.x;i++){this.tileControllers[i]=[];for(var t=0;t<this.fieldSize.y;t++){var e=new s(this,this.fieldView.tilesContainer,this.tilesPool,i,t);this.tileControllers[i][t]=e}}this.makeSureEligibleGroupExists()},l.onGameEnd=function(){this.inputLocked=!0},l.getTileViewPosition=function(i,t){this.fieldView.getTilePosition(i,t)},l.onTileClick=function(i){if(!this.inputLocked){if(null!=this.currentBooster)switch(this.currentBooster){case r.Bomb:var t=this.getTilesInRadius(i.position,this.bombRadius);return this.removeGroup(t),void(this.currentBooster=null);case r.Teleport:return void(null==this.tileToTeleport?this.tileToTeleport=i.position:(this.requireRebuild=!0,this.swapTiles(this.tileToTeleport.clone(),i.position.clone()),this.tileToTeleport=null,this.currentBooster=null))}var e=this.findGroup(i.color,i.position);e.length>=this.minimalGroupSize&&(this.removeGroup(e),this.onGroupRemoved&&this.onGroupRemoved(e.length))}},l.setBoosterMode=function(i){this.currentBooster=i},l.swapTiles=function(i,t){var e=this.tileControllers[t.x][t.y],l=this.tileControllers[i.x][i.y];this.tileControllers[t.x][t.y]=l,this.tileControllers[i.x][i.y]=e,this.fallingTileCount+=2,l.shuffleToPosition(t.x,t.y,this.checkFallingFinished.bind(this)),e.shuffleToPosition(i.x,i.y,this.checkFallingFinished.bind(this))},l.findGroup=function(i,t){for(var e=[],l=[],o=0;o<this.tileControllers.length;o++){l[o]=[];for(var s=0;s<this.tileControllers[o].length;s++)l[o][s]=!1}return this.findGroupRecursive(i,t,l,e),e},l.getTilesInRadius=function(i,t){for(var e=[],l=0;l<this.tileControllers.length;l++)for(var s=0;s<this.tileControllers[l].length;s++)o.distance(i,this.tileControllers[l][s].position)<=t&&e.push(this.tileControllers[l][s].position);return e},l.findGroupRecursive=function(i,e,l,s){l[e.x][e.y]=!0,s.push(e);for(var r,n=new o,h=t(this.neighbours);!(r=h()).done;){var u=r.value;n.set(e.x+u.x,e.y+u.y),n.x>=0&&n.x<this.tileControllers.length&&n.y>=0&&n.y<this.tileControllers[0].length&&!l[n.x][n.y]&&(l[n.x][n.y]=!0,null!=this.tileControllers[n.x][n.y]&&this.tileControllers[n.x][n.y].color===i&&this.findGroupRecursive(i,n.clone(),l,s))}},l.removeGroup=function(i){for(var e,l=i[0].x,o=t(i);!(e=o()).done;){var r=e.value;this.tileControllers[r.x][r.y].makeExpolosion(),this.tileControllers[r.x][r.y].dispose(),this.tileControllers[r.x][r.y]=null,r.x<l&&(l=r.x)}for(var n,h=[],u=t(i);!(n=u()).done;){var f=n.value;(null==h[f.x-l]||h[f.x-l].y>f.y)&&(h[f.x-l]=f)}for(var a=0,d=h;a<d.length;a++){var c=d[a];this.tileControllers[c.x]=this.tileControllers[c.x].filter((function(i){return null!=i}));for(var p=this.fieldSize.y-this.tileControllers[c.x].length,C=c.y;C<this.tileControllers[c.x].length;C++){var v=this.tileControllers[c.x][C].position.y;this.fallingTileCount++,this.tileControllers[c.x][C].fallToPosition(c.x,C,v-C,this.checkFallingFinished.bind(this))}for(var g=this.tileControllers[c.x].length;g<this.fieldSize.y;g++){var x=new s(this,this.fieldView.tilesContainer,this.tilesPool,c.x,this.tileControllers[c.x].length+p);this.fallingTileCount++,x.fallToPosition(c.x,this.tileControllers[c.x].length,p,this.checkFallingFinished.bind(this)),this.tileControllers[c.x].push(x)}}},l.checkFallingFinished=function(){if(0==--this.fallingTileCount){if(this.requireRebuild){this.requireRebuild=!1;for(var i=0;i<this.tileControllers.length;i++)for(var t=0;t<this.tileControllers[i].length;t++)this.tileControllers[i][t].fixSiblingIndex()}this.makeSureEligibleGroupExists()}},l.makeSureEligibleGroupExists=function(){for(var i=0;i<this.tileControllers.length;i++)for(var t=0;t<this.tileControllers[i].length;t++){if(this.findGroup(this.tileControllers[i][t].color,this.tileControllers[i][t].position).length>=this.minimalGroupSize)return void(this.shuffleAttempts=0)}this.shuffleTiles()},l.shuffleTiles=function(){if(this.shuffleAttempts++,this.shuffleAttempts>this.shuffleMaxAttempts)this.onNoShufflesLeft&&this.onNoShufflesLeft();else{for(var i=[],t=0;t<this.tileControllers.length;t++)for(var e=0;e<this.tileControllers[t].length;e++)i.push(this.tileControllers[t][e]);for(var l=i.length-1;l>0;l--){var o=Math.floor(Math.random()*(l+1)),s=[i[o],i[l]];i[l]=s[0],i[o]=s[1]}for(var r=0;r<this.tileControllers.length;r++)for(var n=0;n<this.tileControllers[r].length;n++)this.tileControllers[r][n]=i[r*this.fieldSize.y+n],this.fallingTileCount++,this.tileControllers[r][n].shuffleToPosition(r,n,this.checkFallingFinished.bind(this))}},e(i,[{key:"fieldSizeY",get:function(){return this.fieldSize.y}},{key:"fieldSizeX",get:function(){return this.fieldSize.x}}]),i}());l._RF.pop()}}}));

System.register("chunks:///_virtual/FieldView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,n,r,a,o,s,l,d,p;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized,a=i.createClass},function(i){o=i.cclegacy,s=i._decorator,l=i.UITransform,d=i.Vec2,p=i.Component}],execute:function(){var u,g,c,h,f,z,y,m,b,w,P,S,T,B;o._RF.push({},"63d47qr4BlNhJNHPQwq7E8j","FieldView",void 0);var v=s.ccclass,x=s.property;i("FieldView",(u=v("FieldView"),g=x({group:{name:"BackgroundPadding"}}),c=x({group:{name:"BackgroundPadding"}}),h=x({group:{name:"BackgroundPadding"}}),f=x({group:{name:"BackgroundPadding"}}),z=x({type:l}),u((b=e((m=function(i){function e(){for(var e,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=i.call.apply(i,[this].concat(a))||this,n(e,"tileSize",b,r(e)),n(e,"paddingLeft",w,r(e)),n(e,"paddingRight",P,r(e)),n(e,"paddingTop",S,r(e)),n(e,"paddingBottom",T,r(e)),n(e,"tailsParent",B,r(e)),e.uiTransform=void 0,e.size=new d(0,0),e}t(e,i);var o=e.prototype;return o.setSize=function(i,e){null!=this.uiTransform||(this.uiTransform=this.node.getComponent(l)),this.size.set(this.tileSize.x*i,this.tileSize.y*e),this.uiTransform.setContentSize(this.size.x+this.paddingLeft+this.paddingRight,this.size.y+this.paddingTop+this.paddingBottom),this.tailsParent.setContentSize(this.size.x,this.size.y),this.tailsParent.node.position.set((this.paddingRight-this.paddingLeft)/2,(this.paddingBottom-this.paddingTop)/2)},o.getTilePosition=function(i,e){e.set(this.size.x/2-i.x*this.tileSize.x-this.tileSize.x/2,-this.size.y/2+i.y*this.tileSize.y+this.tileSize.y/2)},a(e,[{key:"tilesContainer",get:function(){return this.tailsParent.node}}]),e}(p)).prototype,"tileSize",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(0,0)}}),w=e(m.prototype,"paddingLeft",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=e(m.prototype,"paddingRight",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=e(m.prototype,"paddingTop",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=e(m.prototype,"paddingBottom",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=e(m.prototype,"tailsParent",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=m))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameBalanceData.ts",["cc"],(function(){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"7c8575TNP1AVZ5nnWCHaz3E","GameBalanceData",void 0),a._RF.pop()}}}));

System.register("chunks:///_virtual/GameEndController.ts",["cc"],(function(e){var o,t;return{setters:[function(e){o=e.cclegacy,t=e.director}],execute:function(){o._RF.push({},"265c2E5galKKbWDkSKIJ67e","GameEndController",void 0);var n=e("GameEndReason",function(e){return e[e.NoMovesLeft=0]="NoMovesLeft",e[e.GoalReached=1]="GoalReached",e[e.NoGroupsLeft=2]="NoGroupsLeft",e}({}));e("GameEndController",function(){function e(e,o){this.view=void 0,this.onGameEndCallback=void 0,this.view=e,this.onGameEndCallback=o,this.view.initialize((function(){t.loadScene("boot")}))}return e.prototype.onGameEnd=function(e){switch(e){case n.NoMovesLeft:case n.NoGroupsLeft:this.view.showLose(e);break;case n.GoalReached:this.view.showWin()}this.onGameEndCallback(e)},e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/GameEndView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEndController.ts"],(function(e){var t,i,n,r,o,s,a,l,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Label,l=e.Node,u=e.Component},function(e){c=e.GameEndReason}],execute:function(){var p,b,f,g,h,w,m,y,v,d,M,z,G,L;o._RF.push({},"9b560pAx1FFIqZ4cB98v9zc","GameEndView",void 0);var N=s.ccclass,T=s.property;e("GameEndView",(p=N("GameEndView"),b=T({type:a}),f=T({type:l}),g=T({type:a}),p((m=t((w=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"winTitle",m,r(t)),n(t,"loseTitle",y,r(t)),n(t,"winMessage",v,r(t)),n(t,"loseMessageNoMoves",d,r(t)),n(t,"loseMessageNoGroups",M,r(t)),n(t,"title",z,r(t)),n(t,"restartButton",G,r(t)),n(t,"messageLabel",L,r(t)),t}i(t,e);var o=t.prototype;return o.initialize=function(e){this.restartButton.on(l.EventType.TOUCH_END,(function(){e()})),this.node.active=!1},o.showWin=function(){this.title.string=this.winTitle,this.messageLabel.string=this.winMessage,this.node.active=!0},o.showLose=function(e){this.title.string=this.loseTitle,this.messageLabel.string=e===c.NoMovesLeft?this.loseMessageNoMoves:this.loseMessageNoGroups,this.node.active=!0},t}(u)).prototype,"winTitle",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=t(w.prototype,"loseTitle",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=t(w.prototype,"winMessage",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=t(w.prototype,"loseMessageNoMoves",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=t(w.prototype,"loseMessageNoGroups",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=t(w.prototype,"title",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(w.prototype,"restartButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(w.prototype,"messageLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=w))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameScoringController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoostersController.ts"],(function(e){var t,o,a,r;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,o=e.createClass},function(e){a=e.cclegacy},function(e){r=e.BoosterType}],execute:function(){a._RF.push({},"d093dak+aBLCbVGrkd3INKO","GameScoringController",void 0);e("GameScoringController",function(){function e(e,t){this.onNoMovesLeft=void 0,this.onGoalReached=void 0,this.gameBalanceData=void 0,this.currentScore=0,this.movesLeft=0,this.view=void 0,this.gameBalanceData=e,this.view=t,this.movesLeft=e.gameGoal.moves,this.view.setScore(this.currentScore,this.gameBalanceData.gameGoal.targetScore),this.view.setMovesLeft(this.movesLeft)}var a=e.prototype;return a.groupRemoved=function(e){if(this.movesLeft--,this.view.setMovesLeft(this.movesLeft,!0),this.movesLeft<=0)this.onNoMovesLeft&&this.onNoMovesLeft();else{for(var o,a=1,r=t(this.gameBalanceData.scoreMultiplierPerCombo);!(o=r()).done;){var s=o.value,i=s[0],c=s[1];e>=i&&(a=c)}this.currentScore+=this.gameBalanceData.baseScorePerTile*(e-this.gameBalanceData.minimalGroupSize+1)*a,this.view.setScore(this.currentScore,this.gameBalanceData.gameGoal.targetScore,!0),this.currentScore>=this.gameBalanceData.gameGoal.targetScore&&this.onGoalReached&&this.onGoalReached()}},a.boosterUsed=function(e){switch(e){case r.Bomb:this.currentScore-=this.gameBalanceData.bombBoosterPrice;break;case r.Teleport:this.currentScore-=this.gameBalanceData.teleportBoosterPrice}this.view.setScore(this.currentScore,this.gameBalanceData.gameGoal.targetScore,!0)},o(e,[{key:"score",get:function(){return this.currentScore}}]),e}());a._RF.pop()}}}));

System.register("chunks:///_virtual/GameScoringView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIProgressBar.ts"],(function(e){var r,t,i,n,o,a,s,l,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Label,l=e.Component},function(e){c=e.UIProgressBar}],execute:function(){var u,p,f,g,b,y,m,L,v;o._RF.push({},"2d6ddJs3uNPHJ8am0PyBNHv","GameScoringView",void 0);var h=a.ccclass,d=a.property;e("GameScoringView",(u=h("GameScoringView"),p=d({type:s}),f=d({type:s}),g=d({type:c}),u((m=r((y=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,i(r,"scoreLabel",m,n(r)),i(r,"movesLeftLabel",L,n(r)),i(r,"progressBar",v,n(r)),r}t(r,e);var o=r.prototype;return o.setScore=function(e,r,t){this.scoreLabel.string=e.toString(),this.progressBar.setProgress(e/r)},o.setMovesLeft=function(e,r){this.movesLeftLabel.string=e.toString()},r}(l)).prototype,"scoreLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=r(y.prototype,"movesLeftLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(y.prototype,"progressBar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingController.ts",["cc","./ControllersManager.ts"],(function(e){var n,o,i;return{setters:[function(e){n=e.cclegacy,o=e.director},function(e){i=e.ControllersManager}],execute:function(){n._RF.push({},"0ec7aOtHxhO+674TqJpWMzr","LoadingController",void 0);e("LoadingController",(function(e){var n=this;this.loadingView=void 0;this.loadingView=e,this.loadingView.node.removeFromParent(),i.setOnCompleteHandler((function(){n.loadingView.hideLoading(i.onLoadingHidden)})),o.loadScene("gameplay",(function(){n.loadingView.node.setParent(o.getScene())}))}));n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadingController.ts"],(function(o){var n,t,i,e,r;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,i=o._decorator,e=o.Component},function(o){r=o.LoadingController}],execute:function(){var l;t._RF.push({},"86677fh0SdIX5KLtEgZfgTh","LoadingView",void 0);var a=i.ccclass;i.property,o("LoadingView",a("LoadingView")(l=function(o){function t(){for(var n,t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return(n=o.call.apply(o,[this].concat(i))||this).loadingController=void 0,n}n(t,o);var i=t.prototype;return i.onLoad=function(){this.loadingController=new r(this)},i.hideLoading=function(o){var n=this;setTimeout((function(){console.log("LoadingView: hideLoading"),n.node.destroy(),n.loadingController=null,o()}),200)},t}(e))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./ActionType.ts","./GameBalanceData.ts","./BoostersView.ts","./BoostersController.ts","./FieldController.ts","./GameEndController.ts","./GameScoringController.ts","./TileController.ts","./TilesPoolController.ts","./ControllersManager.ts","./FieldView.ts","./GameEndView.ts","./GameScoringView.ts","./TileView.ts","./LoadingController.ts","./LoadingView.ts","./ScreenSizeAdaptation.ts","./UIProgressBar.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ScreenSizeAdaptation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r,s,a,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.Canvas,r=e.UITransform,s=e.view,a=e.screen,c=e.Component}],execute:function(){var h;n._RF.push({},"a9f926n/odJUIo9j0fGGDcp","ScreenSizeAdaptation",void 0);var p=i.ccclass,u=(i.property,i.requireComponent);e("ScreenSizeAdaptation",p("ScreenSizeAdaptation")(h=u(o)(h=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){var e=this.getComponent(o),t=this.node.getComponent(r);if(e&&t){var n=s.getDesignResolutionSize(),i=n.width/n.height,c=a.windowSize,h=c.width/c.height;i<h?n.width=n.height*h:n.height=n.width/h,t.setContentSize(n),s.setDesignResolutionSize(n.width,n.height,4)}},n}(c))||h)||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/TileController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,o,e,l;return{setters:[function(i){t=i.createClass},function(i){o=i.cclegacy,e=i.Vec3,l=i.Vec2}],execute:function(){o._RF.push({},"35a6bT/dgFKAKRj1kRDtWlK","TileController",void 0);i("TileColor",function(i){return i[i.Blue=0]="Blue",i[i.Green=1]="Green",i[i.Purple=2]="Purple",i[i.Red=3]="Red",i[i.Yellow=4]="Yellow",i}({})),i("TileController",function(){function i(i,t,o,n,s){this.color=void 0,this.position=void 0,this.fieldController=void 0,this.tilesPoolController=void 0,this.tileView=void 0,this.viewPosition=new e,this.animating=!1,this.fieldController=i,this.tilesPoolController=o,this.position=new l(n,s),this.color=Math.floor(Math.random()*o.tileColorsVariants),this.tileView=this.tilesPoolController.getTile(),this.fieldController.getTileViewPosition(this.position,this.viewPosition),this.tileView.setup(this,this.viewPosition,t,this.onClick.bind(this))}var o=i.prototype;return o.fallToPosition=function(i,t,o,e){var l=this;this.position.set(i,t),this.animating=!0,this.fieldController.getTileViewPosition(this.position,this.viewPosition),this.tileView.animateFall(this.viewPosition,o,(function(){l.animating=!1,e&&e()}))},o.shuffleToPosition=function(i,t,o){var e=this;this.position.set(i,t),this.animating=!0,this.fieldController.getTileViewPosition(this.position,this.viewPosition),this.tileView.animateShuffle(this.viewPosition,(function(){e.fixSiblingIndex(),e.animating=!1,o&&o()}))},o.fixSiblingIndex=function(){this.tileView.node.setSiblingIndex(this.position.x*this.fieldController.fieldSizeY+this.position.y)},o.makeExpolosion=function(){this.tilesPoolController.performExplosion(this.tileView)},o.dispose=function(){this.tileView.reset(),this.tilesPoolController.returnTile(this.tileView),this.tileView=null,this.fieldController=null,this.tilesPoolController=null,this.viewPosition=null,this.position=null},o.onClick=function(){this.animating||this.fieldController.onTileClick(this)},t(i,[{key:"isAnimating",get:function(){return this.animating}}]),i}());o._RF.pop()}}}));

System.register("chunks:///_virtual/TilesPoolController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileView.ts"],(function(o){var e,i,t,s,l;return{setters:[function(o){e=o.createClass},function(o){i=o.cclegacy,t=o.instantiate,s=o.ParticleSystem2D},function(o){l=o.TileView}],execute:function(){i._RF.push({},"9182bX6C5FLu5ss2EIuqCLD","TilesPoolController",void 0);o("TilesPoolController",function(){function o(o,e,i){this.tiles=[],this.tileExplosions=[],this.tileColors=void 0,this.availableTileColors=void 0,this.tileExplosionPrefab=void 0;var s=i.field.size.x*i.field.size.y;this.tileExplosionPrefab=e;for(var n=0;n<s;n++){var r=t(o).getComponent(l);if(!r)return void console.error("Tile prefab does not contain TileView component");this.tiles.push(r)}for(var a=0;a<s/3;a++)this.addExplostion();this.tileColors=i.tileColorVariants,this.availableTileColors=this.tiles[0].colors.length}var i=o.prototype;return i.getTile=function(){return 0===this.tiles.length?(console.error("No tiles in pool"),null):this.tiles.pop()},i.returnTile=function(o){this.tiles.push(o)},i.performExplosion=function(o){var e=this,i=this.tileExplosions.pop();i?(i.node.setParent(o.node.parent),i.node.position=o.node.position,i.spriteFrame=o.spriteFrame,i.resetSystem(),setTimeout((function(){i.node.removeFromParent(),e.tileExplosions.push(i)}),1e3*i.life)):i=this.addExplostion()},i.addExplostion=function(){var o=t(this.tileExplosionPrefab).getComponent(s);return o||console.error("Tile explosion prefab does not contain ParticleSystem2D component"),this.tileExplosions.push(o),o},e(o,[{key:"tileColorsVariants",get:function(){return Math.min(this.tileColors,this.availableTileColors)}}]),o}());i._RF.pop()}}}));

System.register("chunks:///_virtual/TileView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileController.ts"],(function(i){var t,e,n,o,r,l,s,u,a,c,p,h,f,g,m;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty,n=i.inheritsLoose,o=i.assertThisInitialized,r=i.createClass},function(i){l=i.cclegacy,s=i._decorator,u=i.SpriteFrame,a=i.Enum,c=i.Node,p=i.Color,h=i.tween,f=i.Sprite,g=i.Component},function(i){m=i.TileColor}],execute:function(){var w,T,d,v,C,b,y,D,z,F,k,E,S,_,I;l._RF.push({},"16226wi1FZDBrvifj9L9nIN","TileView",void 0);var L=s.ccclass,O=s.property,V=i("TileColorSprite",(w=L("TileColorSprite"),T=O({type:u}),d=O({type:a(m)}),w((b=t((C=function(){e(this,"sprite",b,this),e(this,"color",y,this)}).prototype,"sprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(C.prototype,"color",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.Blue}}),v=C))||v));i("TileView",(D=L("TileView"),z=O({type:V}),D((E=t((k=function(i){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=i.call.apply(i,[this].concat(r))||this,e(t,"colors",E,o(t)),e(t,"fallingDuration",S,o(t)),e(t,"shufflingDuration",_,o(t)),e(t,"fadingDuration",I,o(t)),t.sprite=void 0,t.currentController=void 0,t.onClick=void 0,t.movingTween=void 0,t.fadingTween=void 0,t}n(t,i);var l=t.prototype;return l.onLoad=function(){this.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this)},l.setup=function(i,t,e,n){this.currentController=i,this.setColor(this.currentController.color),this.node.position=t,this.node.parent=e,this.onClick=n,this.sprite.color=new p(255,255,255,0),this.fadingTween=h(this.sprite).to(.2,{color:p.WHITE},{easing:"sineOut"}).start()},l.animateFall=function(i,t,e){this.movingTween&&this.movingTween.stop(),this.movingTween=h(this.node).to(t*this.fallingDuration,{position:i},{easing:"bounceOut",onComplete:e}).start()},l.animateShuffle=function(i,t){this.movingTween&&this.movingTween.stop(),this.movingTween=h(this.node).to(this.shufflingDuration,{position:i},{easing:"expoInOut",onComplete:t}).start()},l.reset=function(){var i,t;null==(i=this.movingTween)||i.stop(),this.movingTween=null,null==(t=this.fadingTween)||t.stop(),this.fadingTween=null,this.node.parent=null,this.currentController=null,this.onClick=null},l.setColor=function(i){null!=this.sprite||(this.sprite=this.getComponent(f)),this.sprite.spriteFrame=this.colors[i].sprite},l.onTouchEnd=function(i){this.onClick&&this.onClick()},r(t,[{key:"spriteFrame",get:function(){return this.sprite.spriteFrame}}]),t}(g)).prototype,"colors",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=t(k.prototype,"fallingDuration",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),_=t(k.prototype,"shufflingDuration",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),I=t(k.prototype,"fadingDuration",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),F=k))||F));l._RF.pop()}}}));

System.register("chunks:///_virtual/UIProgressBar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var i,t,e,n,a,o,s,l,u,c;return{setters:[function(r){i=r.applyDecoratedDescriptor,t=r.inheritsLoose,e=r.initializerDefineProperty,n=r.assertThisInitialized},function(r){a=r.cclegacy,o=r._decorator,s=r.UITransform,l=r.CCFloat,u=r.clamp01,c=r.Component}],execute:function(){var p,m,h,f,g,y,d,b,B,v,P;a._RF.push({},"24a6cBtKPxOOZje/VKO6nIS","UIProgressBar",void 0);var W=o.ccclass,w=o.property;r("UIProgressBar",(p=W("UIProgressBar"),m=w({type:s}),h=w({type:l}),f=w({type:l}),g=w({type:l}),p((b=i((d=function(r){function i(){for(var i,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return i=r.call.apply(r,[this].concat(a))||this,e(i,"progressBar",b,n(i)),e(i,"minimalWidth",B,n(i)),e(i,"maximalWidth",v,n(i)),e(i,"animDuration",P,n(i)),i}t(i,r);var a=i.prototype;return a.start=function(){this.progressBar.width=this.minimalWidth},a.setProgress=function(r){var i=this.minimalWidth+(this.maximalWidth-this.minimalWidth)*u(r);this.progressBar.width=i},i}(c)).prototype,"progressBar",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(d.prototype,"minimalWidth",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=i(d.prototype,"maximalWidth",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=i(d.prototype,"animDuration",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),y=d))||y));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});